{"ast":null,"code":"import _objectSpread from\"/Users/tatdzi/Desktop/it/projects/EasyTaskerServer/web-client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{authAPI}from\"../api/api\";var SET_TOKEN=\"SET_TOKEN\";var SET_ERROR=\"SET_ERROR\";var SET_STRUCTURED_ERROR=\"SET_STRUCTURED_ERROR\";var SET_USER=\"SET_USER\";export var initialState={token:null,errors:[],structureErrors:[],user:{uuid:null,dt_create:null,dt_update:null,mail:null,fio:null,role:null,status:null}};var authReduser=function authReduser(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;var state_copy;switch(action.type){case SET_TOKEN:state_copy=_objectSpread(_objectSpread({},state),{},{token:action.token});return state_copy;case SET_ERROR:state_copy=_objectSpread(_objectSpread({},state),{},{errors:action.errors});return state_copy;case SET_STRUCTURED_ERROR:state_copy=_objectSpread(_objectSpread({},state),{},{structureErrors:action.errors});return state_copy;case SET_USER:state_copy=_objectSpread(_objectSpread({},state),{},{user:action.user});return state_copy;default:return state;}};export var setToken=function setToken(token){return{type:SET_TOKEN,token:token};};export var setError=function setError(errors){return{type:SET_ERROR,errors:errors};};export var setStructuredError=function setStructuredError(errors){return{type:SET_STRUCTURED_ERROR,errors:errors};};export var setUserInfo=function setUserInfo(user){return{type:SET_USER,user:user};};export var getInfoAboutMe=function getInfoAboutMe(token){return function(dispatch){authAPI.me(token).then(function(response){dispatch(setUserInfo(response.data));});};};export var loginThunk=function loginThunk(mail,password){return function(dispatch){authAPI.login(mail,password).then(function(response){console.log(response);dispatch(setToken(response.data));dispatch(getInfoAboutMe(response.data));}).catch(function(error){console.log(error);});};};export default authReduser;","map":{"version":3,"names":["authAPI","SET_TOKEN","SET_ERROR","SET_STRUCTURED_ERROR","SET_USER","initialState","token","errors","structureErrors","user","uuid","dt_create","dt_update","mail","fio","role","status","authReduser","state","arguments","length","undefined","action","state_copy","type","_objectSpread","setToken","setError","setStructuredError","setUserInfo","getInfoAboutMe","dispatch","me","then","response","data","loginThunk","password","login","console","log","catch","error"],"sources":["/Users/tatdzi/Desktop/it/projects/EasyTaskerServer/web-client/src/redux/AuthReduser.js"],"sourcesContent":["import {authAPI} from \"../api/api\";\n\nconst SET_TOKEN =\"SET_TOKEN\"\nconst SET_ERROR=\"SET_ERROR\"\nconst SET_STRUCTURED_ERROR=\"SET_STRUCTURED_ERROR\"\nconst SET_USER=\"SET_USER\"\n\nexport let initialState = {\n    token: null,\n    errors:[],\n    structureErrors:[],\n    user:{\n        uuid: null,\n        dt_create: null,\n        dt_update: null,\n        mail: null,\n        fio: null,\n        role: null,\n        status: null\n    }\n}\nconst authReduser = (state=initialState,action) => {\n    let state_copy\n    switch (action.type) {\n        case SET_TOKEN:\n            state_copy = {\n                ...state,\n                token: action.token,\n            }\n            return state_copy;\n        case SET_ERROR:\n            state_copy = {\n                ...state,\n                errors: action.errors,\n            }\n            return state_copy;\n        case SET_STRUCTURED_ERROR:\n            state_copy = {\n                ...state,\n                structureErrors: action.errors,\n            }\n            return state_copy;\n        case SET_USER:\n            state_copy = {\n                ...state,\n                user: action.user,\n            }\n            return state_copy;\n        default:\n            return state;\n    }\n}\n\nexport const setToken=(token)=>\n    ({type:SET_TOKEN,token:token})\n\nexport const setError=(errors)=>\n    ({type:SET_ERROR,errors:errors})\nexport const setStructuredError=(errors)=>\n    ({type:SET_STRUCTURED_ERROR,errors:errors})\nexport const setUserInfo=(user)=>\n    ({type:SET_USER,user:user})\n\nexport const getInfoAboutMe = (token)=>(dispatch)=>{\n    authAPI.me(token).then(response =>{\n        dispatch(setUserInfo(response.data))\n    })\n}\n\nexport const loginThunk = (mail,password )=>(dispatch) =>{\n    authAPI.login(mail,password)\n        .then(response =>{\n            console.log(response);\n            dispatch(setToken(response.data))\n            dispatch(getInfoAboutMe(response.data))\n        })\n        .catch(error=>{\n            console.log(error);\n        })\n}\n\n\nexport default authReduser"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}